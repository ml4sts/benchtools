import os
import time
import logging 

def init_logger(log_path, task_name):
    ''''
    Initializes the logger for a specific task.
    
    Parameters:
    -------------
    log_path: str
        The path to the log dir where the log file will be created.
    task_name: str
        The name of the task for which the logger is being initialized. This will be used to name the log file.
    '''
    timestamp = time.time()
    task_dir = os.path.join(log_path, task_name)
    if not os.path.exists(task_dir):
        os.mkdir(task_dir)
    run_dir = os.path.join(task_dir,str(timestamp))
    os.mkdir(run_dir)

    {
        # TODO: What can we benifit from the logger?
        # log_file = os.path.join(log_path, f'{task_name}_log.txt')
        # print(f"\nLOGPATH: {log_file}\n") # Debugging

        # formatter = logging.Formatter('%(asctime)s - %(levelname)s - %(message)s')
        # handler = logging.FileHandler(log_file)
        # handler.setFormatter(formatter)

        # logger = logging.getLogger(task_name)
        # logger.setLevel(logging.INFO) # TODO add as an argument to the init functuion to use more options 
        # logger.addHandler(handler)

        # print(logger) # Debugging
        # return logger
    }

    return run_dir

def log_interaction(run_log_path, prompt_idx, prompt, response):
    """
    Logs the event to 

    Parameters:
    -------------
    prompt: string
        The input provided to the agent.
    response: string
        The output generated by the agent.
    """

    prompt_dir = os.path.join(run_log_path, f"prompt_{prompt_idx}")
    os.mkdir(prompt_dir)

    with open(os.path.join(prompt_dir, "log.txt"), 'w') as f:
        f.write("------ prompt ------\n")
        f.write(f"{prompt}\n\n")
        f.write("------ response ------\n")
        f.write(f"{response}\n\n")

    # TODO: What can we benifit from the logger?
    # logger.info(f'Input: {prompt}')
    # logger.info(f'Output: {response}')



    

